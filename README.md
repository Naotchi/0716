# 0716

## ディレクトリの説明

初めにこのディレクトリで`./do.sh`を実行すると、pyディレクトリの中にある`take_a_picture.py`と`predict.py`が順に実行されます。その他は呼ばれません。

### do.sh

ラズパイで初めに実行するファイルです。

### py

`take_a_picture.py`, `predict.py`が格納されています。

#### take_a_picture.py

スイッチが押されると撮影し直下に`picture.png`を生成、表示することを繰り返します。0.5秒以上長押しで終了します。

。

#### predict.py

初めに現在時刻を取得しその名前のディレクトリを生成します。`take_a_picture.py`で`0716/`直下に生成された`picture.png`がここに移動され今後生成される画像も全てここに集まります。

閾値を標準入力として受け付け、その閾値で二値化した画像を表示することを繰り返します。-1を入力するとその直前の入力の閾値が採用、繰り返しが終了します。

採用された閾値で二値化、予め決めておいた値でスライスし、各数字が1枚の画像として取り出されます。

各数字の画像を1枚ずつ推論し、まとめて出力します。

### make_model.ipynb

`predict.py`で推論に使われるモデルを生成します。4層28000パラメータのCNNモデルです。mnist48000枚で訓練しました。

### models

`make_model.ipynb`で生成されたモデルが格納されています。数字は何epoch目かを表しています。

### setup.sh

ラズパイにtensorflow2.0をインストールするためのファイルです。

### 解答用紙

規則的に数字を並べるために作った解答用紙DOCXファイルです。

## メモ

setup.shでラズパイにtensorflow2.0をインストール

解答用紙は解答用紙(DOCXファイル)を印刷

B5用紙の左上隅から横方向に9.5cm、縦方向に7.5cm、高さ方向に7.5cmくらいにカメラモジュールを持ってくる


